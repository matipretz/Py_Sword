<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!--CÓDIGO PARA ENLAZAR BOOSTRAP-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <title>Bienvenido/a a Py Sword</title>
    <!--FAVICON-->
    {% include 'favicon.html' %}
  </head>
  <body>
    <!--CÓDIGO PARA ELNAZAR ESTILOS-->
    {% block CustomCSS%}
    <link
      rel="stylesheet"
      href="{{url_for('static', filename='css/login.css')}}"
    />
    {%endblock%}

    <!--BARRA DE NAVEGACIÓN-->
    <header>
      <ul class="nav nav-tabs nav justify-content-end">
        <a class="navbar-logo" href="py_sword.html">
          <img src="{{url_for('static', filename='img/logo_py_sword.png')}}" alt="Logo">
        <li class="nav-item">
          <a class="nav-link" href="{{url_for('logout')}}">Cerrar Sesión</a>
        </li>
      </ul>
    </header>
    <!--Inicio -->
    <h1 class="title-home">Bienvenido/a {{session["fullname"]}}</h1>

    <h1>Contraseñas almacenadas</h1>
  <table border="1">
    <tr>
      <th>ID</th>
      <th>Servicio</th>
      <th>Usuario</th>
      <th>Contraseña</th>
      <th>Acciones</th>
    </tr>

    {% for contrasena in contrasenas %}
    <tr>
      <td> {{ contrasena.id }} </td>
      <td> {{ contrasena.servicio }} </td>
      <td> {{ contrasena.usuario }} </td>
      <td> <input type="password" value="{{ contrasena.contrasena }}" class="contrasena-fila" readonly>
      </td>
      <td><button type="button" class="toggle-btn" onclick="togglePassword(this)">Mostrar/ocultar</button>
        <button type="button" class="copy-btn" onclick="copyToClipboard(this)" disabled>Copiar</button>
        <button type="button" class="delete-btn" data-id="{{ contrasena[0] }}" onclick="deleteRow(this)">Borrar</button>
        <button onclick="abrirModal({{ contrasena.id }})">Editar</button>

      </td>
    </tr>
    {% endfor %}
  </table>

  <div id="editarModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="cerrarModal()">&times;</span>
      <iframe id="editarFrame" width="100%" height="400px" frameborder="1"></iframe>
    </div>
  </div>
  <br>
  <a href="/">Volver al inicio</a>
  <script src="../static/js/scripts.js"></script>

  </body>
  {% include 'footer.html' %}
</html>
